# Web製作者のためのCSS設計の教科書

## 良いCSSとは

- 予測しやすい
- 再利用しやすい
- 保守しやすい
- 拡張しやすい

CSSは他の言語より非力で、強固な設計を前提にしてコードを書くことは難しい

### 破綻しやすいCSS

- HTMLの構造に依存している
  - classを活用する
- スタイルを取り消している
  - 分けて追加していく
- 絶対値を多用
  - 相対値を使える

### 修正しやすいCSSへ

要素を部品＝モジュール、コンポーネントと考える設計が求められる

## CSSの基本

CSSの設計を考えるには、基本であるセレクタと詳細度のことを理解しておく必要がある

```css
.selector { property: value }
```

### カスケーディングの基本

セレクタには詳細度という条件があり、より具体的・詳細であるほど、優先される。  
詳細度が同じであれば、ルールセットは後勝ち（上書き）となる。

#### 詳細度

1. !important
  - 基本的には避けたい
2. インライン記述（style属性）
  - これも避けたい
3. IDセレクタ
  - 事実上もっとも詳細度が高い
4. クラスセレクタ・属性セレクタ・擬似クラス
  - class、attr、tag:first-childなど
5. 要素セレクタ・擬似要素
  - タグそのものが要素、擬似は::afterや::beforeなど
6. ユニバーサルセレクタ
  - \*（アスタリスク）を使用したセレクタ

#### セレクタの付け方の方針

- 要素セレクタを省略する
- 短く単純にする
- 限定的にする
  - 半角スペースを空けて記述する子孫セレクタ
  - >を使った子供セレクタ

## コンポーネント設計のアイデア

CSSにはスコープという概念がないため、どうしても汚染が起きやすい。

### OOCSS

オブジェクト指向CSS

原則は2個

- 構造と見た目の分離
  - 同じ要素は共通化したclassセレクタにまとめる、など
- コンテナーとコンテンツを分離
  - よくわからん…

### SMACSS

OOCSSコンセプトをベースに作られたフロントエンドに関するガイドライン

パターンを抽出しやすくするためのカテゴリを用意

- Base
  - 各要素のデフォルトのスタイル、よほどの理由がない限り書き換えることはない
- Layout
  - 慣習的にはIDを用いるような、ヘッダー、フッターコンテンツエリア、サイドバーといった構成の大枠にかかる要素へのルール
  - Layoutカテゴリのコンポーネントであることを明示するためにクラス名に l-（Layout）接頭子をつける
- Module
  - Layoutを除いたページを構成する全ての要素が属すると考えて良い
- State
  - JS制御などで切り替わるような要素の状態を表すルール
  - !importantを使用することを推奨
  - メディアクエリ
    - ディスプレイのサイズといった条件に対応するモジュール
- Theme
  - テーマ切り替えを求められるCSSの時に考慮する
  - テーマの影響を受けてスタイルが変わるコンポーネントに対してtheme-接頭子のクラスを付与するというアプローチもある

#### 命名規則

- コンポーネントを継承するコンポーネントを作成する時は、ベースコンポーネント名を名前空間として先頭に使用する
  - 汚染を避ける
  - クラス名を見て何の拡張かわかる

### BEM

Block Element Modifierの略

フロントエンド開発手法で使われている命名規則

- 親子の従属関係にあるため、Block__Element
- 属性を示す対等関係にあるため、Block--Modifier

命名のデリミタには固定のルールはなく各々で工夫していることも多いが、一つのデザインの中で統一されていることが大事。

### MCSS

マルチレイヤーCSS

複数のレイヤー構成を元にしてCSSを設計するアプローチのこと。

- Foundation
  - SMACSSのBaseカテゴリと同等
- Base
  - SMACSSのModuleカテゴリと近い
- Project
  - Baseレイヤーより具体的なページを構成する要素を含む
- Cosmetic
  - ちょっとしたスタイル、ユーティリティなど


### FLOCSS

筆者が現在進行系で作成しているガイドライン

## コンポーネント設計の実践

コンポーネント設計は時と場合により、万能の解決策は存在しない。

### ボタンやリンク要素

- `cursor: pointer`でマウスオーバー時の振る舞い設定
- 固定の幅を持たせない

### アイコン

- CSSスプライト
  - 背景画像の座標をbackground-positionで制御し、widthとheightで表示領域を指定して表示する
- アイコンフォント
  - フォントを使えるようにするための@font-faceルール指定などはやや複雑だが、コンポーネント自体はシンプルになる

### メディア

画像や写真が左側に、本文などがその反対側に並ぶようなレイアウト

シンプルな実装例

```
.media:before,
.media:after {
  display: table; /* 子要素でfloatを使うためClearfixする */
  content: " "; /* 子要素でfloatを使うためClearfixする */
}

.media:after {
  clear: both; /* 子要素でfloatを使うためClearfixする */
}

.media__image {
  float: left;
  margin-right: 10px;
}

.media__image > img {
  display: block;
}

.media__body {
  overflow: hidden; /* 画像下にテキストが回り込むのを防ぐ */
}

```

### ナビゲーション

- `display:table`と`display:table-cell`を使うと、要素が増えすぎても改行されない
- `float:left`なら改行される
- 要素を並べるなら、モダンなブラウザに絞るれるならFlexboxもいい
  - `display:flex`
  - `flex-wrap: wrap;` が適用されていない限りはdisplay:tableのように水平に子要素が並ぶ。
    - 均一の幅で並べたい場合は`width: 100%;`

## CSSプリプロセッサを用いた設計と管理

## コンポーネントの運用に必要なツール

## WebComponentsの可能性
